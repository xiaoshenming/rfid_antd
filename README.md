串口通信协议文档
1. 基本信息
- 串口号：USART1
- 波特率：请根据实际设置补充（如 9600、115200 等）
- 数据位：8
- 停止位：1
- 校验位：无
- 流控：无
- 接收结束标志：\n（换行符）

2. 通信格式
- 上位机通过串口发送以“\n”结尾的ASCII命令字符串
- 单条指令最大长度：不超过 RX_BUFFER_SIZE 字节
- 所有命令均为大写英文字母+参数 的格式

3. 支持的命令一览
   指令代码	含义	参数	响应说明
   RID\n	读取卡ID	无	读取并上传卡ID
   RBK\n	读取数据块	无	读取块1的数据并上传
   WBK+数据\n	写入数据块	32位ASCII十六进制字符串（16字节）	返回“写入完成”或“命令格式错误”
4. 命令格式说明
   4.1 读取卡ID（RID）
- 发送：RID\n
- 功能：读取当前检测到的RFID卡片ID
- 响应：上传卡ID，格式请与下位机协商，如HEX字符串或原始字节序列

4.2 读取块数据（RBK）
- 发送：RBK\n
- 功能：读取第1块（Block 1）内容
- 响应：上传Block 1的16字节数据（格式待协商）

4.3 写入块数据（WBK）
- 发送格式（示例）：WBK102345202206100080FFFFFFFFFFFFFFFF\n

说明：
- 第1位（1位）：卡状态，1表示已注册，0表示未注册
- 第2位（1位）：挂失状态，0表示未挂失，1表示挂失
- 第3至6位（4位）：金额，最大值为9999（十进制），需转为4位十六进制字符串
- 第7至18位（12位）：学号（例如202206100080）
- 剩余部分填充为FF至总长度满足32个十六进制字符（16字节）
- 总体组成需满足32个ASCII字符（16字节）

- 成功响应：写入完成\r\n
- 格式错误响应：写入命令格式错误\r\n

5. 错误处理
- 未知命令：当接收到不识别的命令前缀时，返回：未知命令\r\n

6. 通信流程图（简略）
   [上位机发送命令] --> [下位机接收命令]
   |
   v
   [根据命令类型解析并执行]
   |
   v
   [串口返回执行结果]

7. 注意事项
1. 所有命令必须以 \n（换行符）结尾，否则不会被处理。
2. 写入命令的十六进制字符串必须是 32位ASCII字符，每两个字符代表一个字节。
3. 推荐上位机在接收结果前增加适当的延时或基于回显进行同步处理。
